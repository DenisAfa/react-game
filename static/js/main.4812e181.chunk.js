(this["webpackJsonpreact-game"]=this["webpackJsonpreact-game"]||[]).push([[0],[,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var l,s,c=a(1),n=a.n(c),o=a(5),i=a.n(o),b=(a(10),a(2)),r=a(3),u=function(e,t,a,s){for(var c=0,n=function(){var s=Math.floor(Math.random()*t),n=Math.floor(Math.random()*a);e[s][n].value!==l.bomb&&(e=e.map((function(e,t){return e.map((function(e,a){return s===t&&n===a?Object(r.a)(Object(r.a)({},e),{},{value:l.bomb}):e}))})),c+=1)};c<s;)n();return e},f=function(e,t,a,l,s){var c=[];return t>0&&a>0?c.push(e[t-1][a-1]):c.push(null),t>0?c.push(e[t-1][a]):c.push(null),t>0&&a<l-1?c.push(e[t-1][a+1]):c.push(null),a>0?c.push(e[t][a-1]):c.push(null),a<l-1?c.push(e[t][a+1]):c.push(null),t<s-1&&a>0?c.push(e[t+1][a-1]):c.push(null),t<s-1?c.push(e[t+1][a]):c.push(null),t<s-1&&a<l-1?c.push(e[t+1][a+1]):c.push(null),c},m=function(e,t,a,s,c){var n=f(e,t,a,s,c),o=0;return n.forEach((function(e){(null===e||void 0===e?void 0:e.value)===l.bomb&&(o+=1)})),o},v=function(e,t,a){return e.forEach((function(s,c){s.forEach((function(s,n){if(s.value!==l.bomb){var o=m(e,c,n,a,t);o>0&&(e[c][n]=Object(r.a)(Object(r.a)({},s),{},{value:o}))}}))})),e};!function(e){e[e.none=0]="none",e[e.one=1]="one",e[e.two=2]="two",e[e.three=3]="three",e[e.four=4]="four",e[e.five=5]="five",e[e.six=6]="six",e[e.seven=7]="seven",e[e.eight=8]="eight",e[e.bomb=9]="bomb"}(l||(l={})),function(e){e[e.open=0]="open",e[e.visible=1]="visible",e[e.flagged=2]="flagged"}(s||(s={}));var j,C=function(e,t,a){for(var c=[],n=1,o=0;o<e;o+=1){c.push([]);for(var i=0;i<t;i+=1)c[o].push({id:n,value:l.none,state:s.open}),n+=1}return c=u(c,e,t,a),c=v(c,e,t)};a(11);!function(e){e[e.topLeftCell=0]="topLeftCell",e[e.topCell=1]="topCell",e[e.topRightCell=2]="topRightCell",e[e.leftCell=3]="leftCell",e[e.rightCell=4]="rightCell",e[e.bottomLeftCell=5]="bottomLeftCell",e[e.bottomCell=6]="bottomCell",e[e.bottomRightCell=7]="bottomRightCell"}(j||(j={}));var d,h=function e(t,a,c,n,o){var i=t[a][c];if(i.state===s.visible||i.state===s.flagged)return t;var b=t.slice();return b[a][c].state=s.visible,f(t,a,c,o,n).forEach((function(t,i){if((null===t||void 0===t?void 0:t.state)===s.open&&t.value!==l.bomb)switch(i){case j.topLeftCell:t.value===l.none?b=e(b,a-1,c-1,n,o):b[a-1][c-1].state=s.visible;break;case j.topCell:t.value===l.none?b=e(b,a-1,c,n,o):b[a-1][c].state=s.visible;break;case j.topRightCell:t.value===l.none?b=e(b,a-1,c+1,n,o):b[a-1][c+1].state=s.visible;break;case j.leftCell:t.value===l.none?b=e(b,a,c-1,n,o):b[a][c-1].state=s.visible;break;case j.rightCell:t.value===l.none?b=e(b,a,c+1,n,o):b[a][c+1].state=s.visible;break;case j.bottomLeftCell:t.value===l.none?b=e(b,a+1,c-1,n,o):b[a+1][c-1].state=s.visible;break;case j.bottomCell:t.value===l.none?b=e(b,a+1,c,n,o):b[a+1][c].state=s.visible;break;case j.bottomRightCell:t.value===l.none?b=e(b,a+1,c+1,n,o):b[a+1][c+1].state=s.visible}return b})),b},O=(a(12),a(0));!function(e){e.smile="\ud83e\udd20",e.oops="\ud83e\udd76",e.lost="\u2620\ufe0f",e.won="\ud83d\ude0e"}(d||(d={}));var k,g=function(e){var t=e.face,a=e.setHasLostCallback,l=e.setTimeCallback,s=e.setCellsCallback,c=e.setIsLiveCallback,n=e.setBombCounterCallback,o=e.setHasWonCallback,i=e.setFaceCallback,b=e.maxRows,r=e.maxColumns,u=e.numbersOfBombs;return Object(O.jsx)("div",{className:"game-info__smile",onClick:function(){c(!1),l(0),s(C(b,r,u)),n(u),a(!1),o(!1),i(d.smile)},children:Object(O.jsx)("span",{className:"game-info__image",children:t})})},p=(a(14),function(e){var t=e.value,a=e.state,c=e.row,n=e.column,o=e.isRed;return Object(O.jsx)("div",{"data-row":"".concat(c),"data-col":"".concat(n),className:"game-field__cell cell ".concat(a===s.visible?"game-field__cell_visible":""," game-field__cell_value-").concat(t," ").concat(o?"game-field__cell_red":""),children:function(){switch(a){case s.visible:return t===l.bomb?Object(O.jsx)("span",{children:"\ud83e\udde8"}):t===l.none?null:t;case s.flagged:return Object(O.jsx)("span",{"data-row":"".concat(c),"data-col":"".concat(n),children:"\ud83c\udff4\u200d\u2620\ufe0f"});default:return null}}()})}),x=n.a.memo(p),N=(a(15),function(e){var t=e.cells,a=e.isLive,n=e.bombCounter,o=e.maxRows,i=e.maxColumns,b=e.setFaceCallback,u=e.setCellsCallback,f=e.setIsLiveCallback,m=e.setBombCounterCallback,v=e.setHasLostCallback,j=e.setHasWonCallback,C=e.hasLost,k=function(e,c){a||C||f(!0);var n=t.slice(),b=t[e][c];if(b.state!==s.flagged&&b.state!==s.visible&&!C){switch(b.value){case l.bomb:return v(!0),n[e][c].isRed=!0,n=t.slice().map((function(e){return e.map((function(e){return e.value===l.bomb?Object(r.a)(Object(r.a)({},e),{},{state:s.visible}):e}))})),void u(n);case l.none:n=h(n,e,c,o,i);break;default:n[e][c].state=s.visible}for(var m=!1,d=0;d<o;d+=1)for(var O=0;O<i;O+=1){var k=n[d][O];if(k.value!==l.bomb&&k.state===s.open){m=!0;break}}m||(n=n.map((function(e){return e.map((function(e){return e.value===l.bomb?Object(r.a)(Object(r.a)({},e),{},{state:s.flagged}):e}))})),j(!0)),u(n)}},g=Object(c.useMemo)((function(){return t.map((function(e,t){return e.map((function(e,a){return Object(O.jsx)(x,{value:e.value,state:e.state,row:t,column:a,isRed:e.isRed},e.id)}))}))}),[t]);return Object(O.jsx)("div",{className:"game-field ".concat(16===i?"game-field_16x16":""," ").concat(30===i?"game-field_16x30":""),onMouseDown:function(e){if(!isNaN(Number(e.target.dataset.row))){var a=Number(e.target.dataset.row),l=Number(e.target.dataset.col),c=t[a][l];c.state!==s.visible&&c.state!==s.flagged&&b(d.oops)}},onMouseUp:function(){b(d.smile)},onClick:function(e){var t=Number(e.target.dataset.row),a=Number(e.target.dataset.col);isNaN(t)||isNaN(a)||k(t,a)},onContextMenu:function(e){var l=Number(e.target.dataset.row),c=Number(e.target.dataset.col);e.preventDefault(),isNaN(l)||isNaN(c)||function(e,l){if(a||C||f(!0),!C){var c=t[e][l],o=t.slice();c.state!==s.visible&&(c.state===s.open?(o[e][l].state=s.flagged,u(o),n>-99&&m(n,1)):c.state===s.flagged&&(o[e][l].state=s.open,u(o),m(n,1,!0)))}}(l,c)},children:g})}),_=n.a.memo(N),L=(a(16),a.p+"static/media/rs_school_js.ad178c0d.svg"),w=function(){return Object(O.jsx)("footer",{className:"game-footer",children:Object(O.jsxs)("div",{className:"info",children:[Object(O.jsx)("a",{className:"info__creator",href:"https://github.com/DenisAfa",target:"_blank",rel:"noreferrer",children:"Denis Afanasev"}),Object(O.jsx)("a",{href:"https://rs.school/",target:"_blank",rel:"noreferrer",children:Object(O.jsx)("img",{src:L,alt:"logo",className:"info__logo"})}),Object(O.jsx)("span",{className:"info__year",children:"2021"})]})})},R=n.a.memo(w),S=(a(17),a(18),function(e){var t=e.value,a=t<0?"-".concat(Math.abs(t).toString().padStart(2,"0")):t.toString().padStart(3,"0");return Object(O.jsx)("div",{className:"game-info__display",children:a})}),H=n.a.memo(S),M=function(e){var t=e.face,a=e.time,l=e.isLive,s=e.bombCounter,n=e.maxRows,o=e.maxColumns,i=e.numbersOfBombs,b=e.setTimeCallback,r=e.setCellsCallback,u=e.setIsLiveCallback,f=e.setBombCounterCallback,m=e.setHasLostCallback,v=e.setHasWonCallback,j=e.setFaceCallback;return Object(c.useEffect)((function(){if(l&&a<999){var e=setInterval((function(){b(a,1)}),1e3);return function(){clearInterval(e)}}}),[l,a,b]),Object(O.jsxs)("section",{className:"game-info",children:[Object(O.jsx)(H,{value:s}),Object(O.jsx)(g,{face:t,setTimeCallback:b,setCellsCallback:r,setIsLiveCallback:u,setBombCounterCallback:f,setHasLostCallback:m,setHasWonCallback:v,setFaceCallback:j,maxRows:n,maxColumns:o,numbersOfBombs:i}),Object(O.jsx)(H,{value:a})]})};a(19);!function(e){e[e.standard=0]="standard",e[e.expert=1]="expert",e[e.crazy=2]="crazy"}(k||(k={}));var B=function(e){var t=e.setMaxRowsCallback,a=e.setMaxColumnsCallback,l=e.setNumbersOfBombsCallback,s=e.setHasChangeLevelCallback;return Object(O.jsx)("header",{className:"game-header",children:Object(O.jsx)("section",{className:"settings",children:Object(O.jsx)("div",{className:"settings__levels levels",children:Object(O.jsxs)("select",{className:"levels__list",name:"levels",defaultValue:"DEFAULT",onChange:function(e){switch(Number(e.target.value)){case k.standard:t(9),a(9),l(10);break;case k.expert:t(16),a(16),l(40);break;case k.crazy:t(16),a(30),l(99);break;default:return}s(!0)},children:[Object(O.jsx)("option",{value:"DEFAULT",disabled:!0,children:"Levels"}),Object(O.jsx)("option",{value:"0",children:"Standard"}),Object(O.jsx)("option",{value:"1",children:"Expert"}),Object(O.jsx)("option",{value:"2",children:"Crazy"})]})})})})},E=n.a.memo(B),I=function(){var e=Object(c.useState)(9),t=Object(b.a)(e,2),a=t[0],l=t[1],s=Object(c.useState)(9),n=Object(b.a)(s,2),o=n[0],i=n[1],r=Object(c.useState)(10),u=Object(b.a)(r,2),f=u[0],m=u[1],v=Object(c.useState)(d.smile),j=Object(b.a)(v,2),h=j[0],k=j[1],g=Object(c.useState)(!1),p=Object(b.a)(g,2),x=p[0],N=p[1],L=Object(c.useState)(0),w=Object(b.a)(L,2),S=w[0],H=w[1],B=Object(c.useState)(C(a,o,f)),I=Object(b.a)(B,2),F=I[0],y=I[1],D=Object(c.useState)(f),T=Object(b.a)(D,2),W=T[0],z=T[1],A=Object(c.useState)(!1),U=Object(b.a)(A,2),J=U[0],V=U[1],q=Object(c.useState)(!1),G=Object(b.a)(q,2),K=G[0],P=G[1],Q=Object(c.useState)(!1),X=Object(b.a)(Q,2),Y=X[0],Z=X[1],$=Object(c.useCallback)((function(e){k(e)}),[k]),ee=Object(c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;H(e+t)}),[S]),te=Object(c.useCallback)((function(e){N(e)}),[N]),ae=Object(c.useCallback)((function(e){y(e)}),[y]),le=Object(c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];z(a?e+t:e-t)}),[W]),se=Object(c.useCallback)((function(e){V(e)}),[V]),ce=Object(c.useCallback)((function(e){P(e)}),[P]),ne=Object(c.useCallback)((function(e){l(e)}),[l]),oe=Object(c.useCallback)((function(e){i(e)}),[i]),ie=Object(c.useCallback)((function(e){m(e)}),[m]),be=Object(c.useCallback)((function(e){Z(e)}),[Z]);return Object(c.useEffect)((function(){J&&(N(!1),k(d.lost))}),[J]),Object(c.useEffect)((function(){K&&(N(!1),k(d.won))}),[K]),Object(c.useEffect)((function(){Y&&(y(C(a,o,f)),z(f),H(0),N(!1))}),[Y,a,o,f]),Object(O.jsxs)("div",{children:[Object(O.jsx)(E,{setHasChangeLevelCallback:be,setMaxRowsCallback:ne,setMaxColumnsCallback:oe,setNumbersOfBombsCallback:ie}),Object(O.jsx)("div",{className:"game-wrapper",children:Object(O.jsxs)("main",{className:"game",children:[Object(O.jsx)(M,{isLive:x,time:S,face:h,bombCounter:W,setTimeCallback:ee,setIsLiveCallback:te,setCellsCallback:ae,setBombCounterCallback:le,setHasLostCallback:se,setHasWonCallback:ce,setFaceCallback:$,maxRows:a,maxColumns:o,numbersOfBombs:f}),Object(O.jsx)(_,{cells:F,isLive:x,bombCounter:W,hasLost:J,setFaceCallback:$,setIsLiveCallback:te,setCellsCallback:ae,setBombCounterCallback:le,setHasLostCallback:se,setHasWonCallback:ce,maxRows:a,maxColumns:o})]})}),Object(O.jsx)(R,{})]})};i.a.render(Object(O.jsx)(n.a.StrictMode,{children:Object(O.jsx)(I,{})}),document.getElementById("root"))}],[[20,1,2]]]);
//# sourceMappingURL=main.4812e181.chunk.js.map